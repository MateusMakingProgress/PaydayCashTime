<div class="container">
  <h1>Nova Transa√ß√£o</h1>

  <section class="form-cadastro">
    <div class="input-group">
      <label>Nome:</label>
      <input [(ngModel)]="transactionsService.newTransaction.whoDid" placeholder="Quem fez?" />
    </div>

    <div class="input-group">
      <label>Descri√ß√£o:</label>
      <input [(ngModel)]="transactionsService.newTransaction.description" placeholder="Descri√ß√£o" />
    </div>

    <div class="input-group">
      <label>Tipo Movimenta√ß√£o:</label>
      <select [(ngModel)]="transactionsService.newTransaction.exitJoin">
        <option [ngValue]="1">Entrada (+)</option>
        <option [ngValue]="2">Sa√≠da (-)</option>
      </select>
    </div>

    <div class="input-group">
      <label>Valor:</label>
      <input [(ngModel)]="transactionsService.newTransaction.transactionValue" type="number" placeholder="Valor" />
    </div>

    <div class="input-group">
      <label>Data Transf√™rencia:</label>
      <input [(ngModel)]="transactionsService.newTransaction.transactionDate" type="datetime-local" placeholder="Data" />
    </div>

    <div class="input-group">
      <label>M√©todo de Pagamento:</label>
      <select [(ngModel)]="transactionsService.newTransaction.payMethod">
        <option [ngValue]="1">Dinheiro</option>
        <option [ngValue]="2">D√©bito</option>
        <option [ngValue]="3">Cr√©dito</option>
        <option [ngValue]="4">Transf√™rencia</option>
      </select>
    </div>

    <div class="input-group checkbox-group">
      <label>Parcelado?</label>
      <input type="checkbox" [(ngModel)]="transactionsService.newTransaction.haveInstallments" />
    </div>

    <div class="input-group" *ngIf="transactionsService.newTransaction.haveInstallments">
      <label>Total de Parcelas:</label>
      <input [(ngModel)]="transactionsService.newTransaction.totalInstallments" type="number" min="1" />
    </div>

    <button class="btn-save" (click)="save()">Adicionar Transa√ß√£o</button>
  </section>

  <hr>

  <div class="dashboard-resumo">

    <div class="card-resumo entrada">
      <span>Entradas</span>
      <strong>{{ totalJoins() | currency: 'BRL' }}</strong>
    </div>

    <div class="card-resumo saida">
      <span>Sa√≠das</span>
      <strong>{{ totalExits() | currency: 'BRL' }}</strong>
    </div>

    <div class="card-resumo saldo" [ngClass]="totalBalance() >= 0 ? 'positivo' : 'negativo'">
      <span>Saldo Total</span>
      <strong>{{ totalBalance() | currency: 'BRL' }}</strong>
    </div>

  </div>

  <h1>Minhas Transa√ß√µes</h1>

  <section class="busca-container">
    <div class="search-container">
      <label>Pesquisar Transa√ß√µes:</label>
      <input class="search-input" type="text" placeholder="Pesquisar por nome ou descri√ß√£o..." (input)="updateSearch($event)" />
    </div>
  </section>
  
  <div class="lista-transacoes">
    <div class="card-transacao" *ngFor="let item of filteredTransactions()"
         [ngClass]="item.exitJoin === 1 ? 'card-entrada' : 'card-saida'">

      <button class="btn-delete" (click)="remove(item.id)">üóëÔ∏è</button>

      <span class="info-who">{{ item.whoDid }}</span>
      <span class="info-desc">{{ item.description }}</span>
      <span class="info-val">{{ item.exitJoin === 2 ? '-' : '+' }} {{ item.transactionValue | currency: 'BRL' }}</span>
      <span class="info-method">{{ paymentMethods[item.payMethod] || 'N/A' }}</span>
      <span class="info-date">{{ item.transactionDate | date: 'dd/MM/yyyy' }}</span>
      <span class="info-status" [class.parcelado]="item.haveInstallments">
        {{ item.haveInstallments ? 'Parcelado (' + item.totalInstallments + 'x)' : '√Ä vista' }}
      </span>
    </div>
  </div>
</div>
